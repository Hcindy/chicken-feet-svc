(self.webpackChunkchicken_feet_web=self.webpackChunkchicken_feet_web||[]).push([[9445],{9445:(t,e,s)=>{"use strict";s.r(e),s.d(e,{RegisterPageModule:()=>Z});var n=s(8583),o=s(665),i=s(1841),r=s(3083),c=s(8136),u=s(1406),a=s(205),l=s(5917),p=s(9773),g=s(639);let h=(()=>{class t{constructor(t){this.http=t,this.ok=u.Z.ok}postAccount(t){return this.http.post("accounts",t).pipe((0,p.zg)(t=>t.result<this.ok?(0,a._)(t.message):(0,l.of)(t.result)))}postLogin(t){return this.http.post("auth/login",t).pipe((0,p.zg)(t=>t.result<this.ok?(0,a._)(t.message):(0,l.of)(t.data)))}}return t.\u0275fac=function(e){return new(e||t)(g.LFG(i.eN))},t.\u0275prov=g.Yz7({token:t,factory:t.\u0275fac}),t})();const m=[{path:"",component:(()=>{class t{constructor(t,e){this.router=t,this.registerService=e,this.ok=u.Z.ok,this.usernameReg=u.Z.usernameReg,this.account={username:""},this.action={loading:!1,message:""},this.postASub=null,this.postLSub=null}submit(){this.action.loading=!0,this.action.message="",this.postASub=this.registerService.postAccount(this.account).subscribe(t=>{this.postLSub=this.registerService.postLogin(this.account).subscribe(t=>{localStorage.setItem("token",t),this.router.navigate(["/hall"])},t=>{"does not exist"===t?this.action.message="\u7528\u6237\u4e0d\u5b58\u5728":(this.action.message="\u767b\u5f55\u5931\u8d25",console.error(t))})},t=>{"exist"===t?this.action.message="\u7528\u6237\u5df2\u5b58\u5728":(this.action.message="\u672a\u77e5\u9519\u8bef",console.error(t)),this.action.loading=!1})}ngOnDestroy(){null!=this.postASub&&this.postASub.unsubscribe(),null!=this.postLSub&&this.postLSub.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(g.Y36(c.F0),g.Y36(h))},t.\u0275cmp=g.Xpm({type:t,selectors:[["app-register"]],features:[g._Bn([h])],decls:16,vars:4,consts:[["mode","ios"],["slot","end"],[3,"disabled","click"],["position","floating"],["placeholder","8\u4f4d\u4ee5\u5185\u7684\u4e2d\u6587\u3001\u82f1\u6587\u6216\u6570\u5b57","autofocus","","clearInput","","name","username",3,"pattern","ngModel","ngModelChange"],["username","ngModel"],["color","danger"]],template:function(t,e){if(1&t&&(g.TgZ(0,"ion-header"),g.TgZ(1,"ion-toolbar",0),g.TgZ(2,"ion-buttons",1),g.TgZ(3,"ion-button",2),g.NdJ("click",function(){return e.submit()}),g._uU(4," \u63d0\u4ea4 "),g.qZA(),g.qZA(),g.TgZ(5,"ion-title"),g._uU(6,"\u6ce8\u518c"),g.qZA(),g.qZA(),g.qZA(),g.TgZ(7,"ion-content"),g.TgZ(8,"ion-item"),g.TgZ(9,"ion-label",3),g._uU(10,"\u7528\u6237\u540d"),g.qZA(),g.TgZ(11,"ion-input",4,5),g.NdJ("ngModelChange",function(t){return e.account.username=t}),g.qZA(),g.qZA(),g.TgZ(13,"ion-item"),g.TgZ(14,"ion-label",6),g._uU(15),g.qZA(),g.qZA(),g.qZA()),2&t){const t=g.MAs(12);g.xp6(3),g.Q6J("disabled",t.pristine||t.invalid),g.xp6(8),g.Q6J("pattern",e.usernameReg)("ngModel",e.account.username),g.xp6(4),g.Oqu(e.action.message)}},directives:[r.Gu,r.sr,r.Sm,r.YG,r.wd,r.W2,r.Ie,r.Q$,r.pK,r.j9,o.c5,o.JJ,o.On],styles:[""]}),t})()}];let d=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({imports:[[c.Bz.forChild(m)],c.Bz]}),t})();var b=s(6538);let Z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.oAB({type:t}),t.\u0275inj=g.cJS({providers:[{provide:i.TP,useClass:b.Q,multi:!0}],imports:[[n.ez,o.u5,i.JF,r.Pc,d]]}),t})()}}]);